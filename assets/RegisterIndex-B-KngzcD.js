import{d as C,h as L,r as g,i as U,c as n,o as u,a as t,j as D,k as d,v as m,s as R,F as V,p as T,g as b,t as c,b as _,f as y,w as E,e as S}from"./index-IA4JHk1r.js";import{d as Y,a as F,g as j,s as I,b as O}from"./firebase-C3FrzXl7.js";const q={class:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white flex flex-col items-center py-16 px-4"},A={class:"bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-4xl"},B=["value"],M={class:"md:col-span-2"},$={class:"md:col-span-2 flex flex-col"},z={class:"flex items-center gap-2"},H={class:"truncate"},J=["src"],G={class:"md:col-span-2 text-center text-sm text-yellow-400"},K={class:"md:col-span-2 flex flex-col items-center"},Q={type:"submit",class:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg font-semibold flex justify-center items-center"},W={key:0,class:"loader mr-2"},te=C({__name:"RegisterIndex",setup(X){const v="dy2aybzlk",w="msd-club",l=L({firstName:"",lastName:"",yearLevel:"",email:"",expertise:"",profilePicture:null}),k=[{label:"1st Year",value:1},{label:"2nd Year",value:2},{label:"3rd Year",value:3},{label:"4th Year",value:4},{label:"5th Year",value:5}],s=g(""),o=g(!1),p=g(null),f=U(()=>l.profilePicture?URL.createObjectURL(l.profilePicture):null),N=a=>{const e=a.target;e.files&&e.files[0]&&(l.profilePicture=e.files[0])},x=()=>{l.profilePicture=null,p.value&&(p.value.value="")},P=async a=>{const e=new FormData;e.append("file",a),e.append("upload_preset",w);try{return(await(await fetch(`https://api.cloudinary.com/v1_1/${v}/upload`,{method:"POST",body:e})).json()).secure_url??null}catch(i){return console.error("Cloudinary error:",i),null}},h=async()=>{s.value="",o.value=!0;try{const a=l.email.trim().toLowerCase(),e=Y(F,"members",a);if((await j(e)).exists()){s.value="This email is already taken.",o.value=!1;return}let r=null;if(l.profilePicture&&(r=await P(l.profilePicture),!r)){s.value="Failed to upload profile picture.",o.value=!1;return}await I(e,{firstName:l.firstName,lastName:l.lastName,yearLevel:Number(l.yearLevel),email:a,about:l.expertise,profilePicture:r,createdAt:O()}),s.value="Registration successful! ðŸŽ‰",l.firstName="",l.lastName="",l.yearLevel="",l.email="",l.expertise="",x(),setTimeout(()=>s.value="",5e3)}catch(a){console.error(a),s.value="Something went wrong. Please try again."}finally{o.value=!1}};return(a,e)=>{const i=S("router-link");return u(),n("main",q,[t("div",A,[e[16]||(e[16]=t("h2",{class:"text-3xl font-bold mb-8 text-center bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"}," Join the Club ",-1)),t("form",{onSubmit:D(h,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-gray-300 mb-1"},"First Name",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>l.firstName=r),type:"text",placeholder:"Enter your first name",required:"",class:"w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 text-white"},null,512),[[m,l.firstName]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-gray-300 mb-1"},"Last Name",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>l.lastName=r),type:"text",placeholder:"Enter your last name",required:"",class:"w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 text-white"},null,512),[[m,l.lastName]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-gray-300 mb-1"},"Year Level",-1)),d(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>l.yearLevel=r),required:"",class:"w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 text-white"},[e[8]||(e[8]=t("option",{value:"",disabled:""},"Select year level",-1)),(u(),n(V,null,T(k,r=>t("option",{key:r.value,value:r.value},c(r.label),9,B)),64))],512),[[R,l.yearLevel]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-gray-300 mb-1"},"Email",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>l.email=r),type:"email",placeholder:"example@school.edu",required:"",class:"w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 text-white"},null,512),[[m,l.email]])]),t("div",M,[e[11]||(e[11]=t("label",{class:"block text-gray-300 mb-1"},"About Yourself",-1)),d(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=r=>l.expertise=r),rows:"3",placeholder:"Tell us about yourself, your interests, or what skills you want to share",class:"w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 text-white"},null,512),[[m,l.expertise]])]),t("div",$,[e[14]||(e[14]=t("label",{class:"block text-gray-300 mb-1"}," Profile Picture (optional) ",-1)),t("div",z,[t("div",{class:"flex-1 flex items-center px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 cursor-pointer text-white",onClick:e[5]||(e[5]=r=>p.value?.click())},[e[12]||(e[12]=t("i",{class:"bx bx-camera text-xl text-purple-400 mr-2"},null,-1)),t("input",{ref_key:"fileInput",ref:p,type:"file",accept:"image/*",class:"hidden",onChange:N},null,544),t("span",H,c(l.profilePicture?l.profilePicture.name:"Click to upload image"),1)]),l.profilePicture?(u(),n("button",{key:0,type:"button",onClick:x,class:"p-2 bg-red-500 hover:bg-red-600 rounded-lg",title:"Clear image"},[...e[13]||(e[13]=[t("i",{class:"bx bx-x"},null,-1)])])):b("",!0)]),f.value?(u(),n("img",{key:0,src:f.value,alt:"Preview",class:"mt-3 w-24 h-24 object-cover rounded-lg border border-gray-600"},null,8,J)):b("",!0)]),t("div",G,c(s.value),1),t("div",K,[t("button",Q,[o.value?(u(),n("span",W)):b("",!0),y(" "+c(o.value?"Registering...":"Register"),1)]),_(i,{to:"/",class:"mt-4 text-sm text-purple-300 hover:text-pink-400"},{default:E(()=>[...e[15]||(e[15]=[y(" Back to Home ",-1)])]),_:1})])],32)])])}}});export{te as default};
